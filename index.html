<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Monster Girl Summoner</title>

<style>
body {
  background: #0b0b0f;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 20px;
}

/* Gem Counter */
#gemCount {
  font-size: 24px;
  margin-bottom: 20px;
}

/* Buttons */
button {
  background: linear-gradient(45deg, #6a00ff, #d900ff);
  border: none;
  padding: 14px 28px;
  border-radius: 12px;
  color: white;
  font-size: 18px;
  margin: 10px;
  box-shadow: 0 0 15px #a200ff;
}

/* Card Container */
.card {
  width: 260px;
  height: 380px;
  margin: 20px auto;
  position: relative;
  perspective: 1000px;
}

.card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.8s;
}

.card.flip .card-inner {
  transform: rotateY(180deg);
}

.card-front,
.card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border: 3px solid #ffffff55;
  border-radius: 18px;
  overflow: hidden;
}

.card-front {
  background: #111;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 5px;
}

.card-front img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card-back {
  background: linear-gradient(135deg, #4c0080, #220033);
  transform: rotateY(180deg);
}

/* Ultra Rare Animation */
.ultra-card img {
  animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
}

@keyframes glow {
  0% { filter: drop-shadow(0 0 2px #a000ff80); }
  50% { filter: drop-shadow(0 0 14px #ff00ffdd); }
  100% { filter: drop-shadow(0 0 2px #a000ff80); }
}

/* Summon Flash */
#summonFlash {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: radial-gradient(circle, #a000ff77, #000000aa);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s;
}

/* Collection */
#collection {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}

.collection-card {
  width: 120px;
  text-align: center;
}

.collection-card img {
  width: 100%;
  border-radius: 10px;
}

/* UR Animation for Summons */
@keyframes floatPulse {
  0% { transform: translateY(0px) scale(1); }
  50% { transform: translateY(-8px) scale(1.03); }
  100% { transform: translateY(0px) scale(1); }
}

@keyframes glowPulse {
  0% { filter: drop-shadow(0 0 5px rgb(111,0,255)); }
  50% { filter: drop-shadow(0 0 15px rgb(200,0,255)); }
  100% { filter: drop-shadow(0 0 5px rgb(111,0,255)); }
}
</style>
</head>

<body>

<h1>Monster Girl Summoner</h1>

<div id="gemCount">Gems: <span id="gems">0</span></div>

<button onclick="summon()">Summon (50 Gems)</button>
<button onclick="battle()">Battle (+10 Gems)</button>

<div id="summonFlash"></div>

<!-- Summon Card -->
<div class="card" id="summonCard">
  <div class="card-inner">
    <div class="card-front">
      <img id="cardImage" src="">
    </div>
    <div class="card-back"></div>
  </div>
</div>

<h2>Your Collection</h2>
<div id="collection"></div>

<script>
/***********************
 * PLAYER SYSTEM
 ***********************/
let player = {
  gems: 100,
  monsters: []
};

// Load save data
let save = localStorage.getItem("MG_Save");
if (save) player = JSON.parse(save);

function saveGame() {
  localStorage.setItem("MG_Save", JSON.stringify(player));
}

/***********************
 * MONSTER CARDS
 ***********************/
const cards = [
  { name: "Cursed Maiden Elise", rarity: "rare", img: "https://picsum.photos/300/450?random=11", hp: 90, atk: 18 },
  { name: "Hollow Witch Serana", rarity: "super", img: "https://picsum.photos/300/450?random=12", hp: 140, atk: 32 },
  { name: "Ashen Knight Marielle", rarity: "mega", img: "https://picsum.photos/300/450?random=13", hp: 200, atk: 50 },

  /* ULTRA RARE LILITH */
  {
    name: "Dark Maiden Lilith",
    rarity: "ultra",
    img: "https://raw.githubusercontent.com/GonjaDrop/monster-girl-game/refs/heads/main/file_00000000dc2871fda0c2ee699123839e.png",
    hp: 350,
    atk: 80,
    animated: true
  }
];

/***********************
 * RARITY PULL RATES
 ***********************/
function pullRarity() {
  let roll = Math.random() * 100;
  if (roll < 60) return "rare";
  if (roll < 85) return "super";
  if (roll < 97) return "mega";
  return "ultra";
}

/***********************
 * FLASH EFFECT
 ***********************/
function flashEffect() {
