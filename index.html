<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Monster Girl Summoner</title>

<style>
body {
  background: #0b0b0f;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 20px;
}

/* Gem Counter */
#gemCount {
  font-size: 24px;
  margin-bottom: 20px;
}

/* Buttons */
button {
  background: linear-gradient(45deg, #6a00ff, #d900ff);
  border: none;
  padding: 14px 28px;
  border-radius: 12px;
  color: white;
  font-size: 18px;
  margin: 10px;
  box-shadow: 0 0 15px #a200ff;
}

/* Card Container */
.card {
  width: 260px;
  height: 380px;
  margin: 20px auto;
  position: relative;
  perspective: 1000px;
}

.card-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.8s;
}

.card.flip .card-inner {
  transform: rotateY(180deg);
}

.card-front,
.card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border: 3px solid #ffffff55;
  border-radius: 18px;
  overflow: hidden;
}

.card-front {
  background: #111;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 5px;
}

.card-front img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card-back {
  background: linear-gradient(135deg, #4c0080, #220033);
  transform: rotateY(180deg);
}

/* Ultra Rare Animation */
.ultra-card img {
  animation: float 3s ease-in-out infinite, glow 2s ease-in-out infinite;
}

@keyframes float {
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
}

@keyframes glow {
  0% { filter: drop-shadow(0 0 2px #a000ff80); }
  50% { filter: drop-shadow(0 0 14px #ff00ffdd); }
  100% { filter: drop-shadow(0 0 2px #a000ff80); }
}

/* Summon Flash */
#summonFlash {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: radial-gradient(circle, #a000ff77, #000000aa);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s;
}

/* Collection */
#collection {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
}

.collection-card {
  width: 120px;
  text-align: center;
}

.collection-card img {
  width: 100%;
  border-radius: 10px;
}

/* UR Animation for Summons */
@keyframes floatPulse {
  0% { transform: translateY(0px) scale(1); }
  50% { transform: translateY(-8px) scale(1.03); }
  100% { transform: translateY(0px) scale(1); }
}

@keyframes glowPulse {
  0% { filter: drop-shadow(0 0 5px rgb(111,0,255)); }
  50% { filter: drop-shadow(0 0 15px rgb(200,0,255)); }
  100% { filter: drop-shadow(0 0 5px rgb(111,0,255)); }
}
</style>
</head>

<body>

<h1>Monster Girl Summoner</h1>

<div id="gemCount">Gems: <span id="gems">0</span></div>

<button onclick="summon()">Summon (50 Gems)</button>
<button onclick="battle()">Battle (+10 Gems)</button>

<div id="summonFlash"></div>

<!-- Summon Card -->
<div class="card" id="summonCard">
  <div class="card-inner">
    <div class="card-front">
      <img id="cardImage" src="">
    </div>
    <div class="card-back"></div>
  </div>
</div>

<h2>Your Collection</h2>
<div id="collection"></div>
let gems = parseInt(localStorage.getItem("gems")) || 0;
let cardCollection = JSON.parse(localStorage.getItem("cardCollection")) || [];

// ---------------------------
// CARD POOL
// ---------------------------
const cards = {
    common: [
        { name: "Forest Sprite", rarity: "Common", image: "images/common1.png", attack: 5, hp: 20 },
        { name: "Cave Goblette", rarity: "Common", image: "images/common2.png", attack: 6, hp: 18 },
        { name: "Slime Maiden", rarity: "Common", image: "images/common3.png", attack: 4, hp: 22 }
    ],
    rare: [
        { name: "Red Oni", rarity: "Rare", image: "images/rare1.png", attack: 12, hp: 30 }
    ],
    superrare: [
        { name: "Storm Harpy", rarity: "Super Rare", image: "images/sr1.png", attack: 18, hp: 35 }
    ],
    megarare: [
        { name: "Abyssal Naga", rarity: "Mega Rare", image: "images/mr1.png", attack: 25, hp: 45 }
    ],
    ultrarare: [
        {
            name: "Dark Maiden Lilith",
            rarity: "Ultra Rare",
            image: "https://raw.githubusercontent.com/GonjaDrop/monster-girl-game/refs/heads/main/file_00000000dc2871fda0c2ee699123839e.png",
            attack: 45,
            hp: 80
        }
    ]
};

// ---------------------------
// GIVE NEW PLAYERS 2 COMMON CARDS
// ---------------------------
function giveStarterCards() {
    if (localStorage.getItem("starterGiven")) return;  // already received

    let starter1 = cards.common[Math.floor(Math.random() * cards.common.length)];
    let starter2 = cards.common[Math.floor(Math.random() * cards.common.length)];

    cardCollection.push(starter1, starter2);

    localStorage.setItem("cardCollection", JSON.stringify(cardCollection));
    localStorage.setItem("starterGiven", "true");

    alert("You received 2 starter Common cards!");
}

// Run the starter check when game loads
giveStarterCards();

// ---------------------------
// UPDATE DISPLAY
// ---------------------------
function updateDisplay() {
    document.getElementById("gems").textContent = gems;
    document.getElementById("cardCount").textContent = cardCollection.length;
}

updateDisplay();

// ---------------------------
// SUMMONING
// ---------------------------
function summonCard() {
    if (gems < 10) {
        alert("Not enough gems!");
        return;
    }

    gems -= 10;

    let roll = Math.random();
    let rarity;

    if (roll < 0.60) rarity = "common";
    else if (roll < 0.80) rarity = "rare";
    else if (roll < 0.93) rarity = "superrare";
    else if (roll < 0.98) rarity = "megarare";
    else rarity = "ultrarare";

    let pool = cards[rarity];
    let card = pool[Math.floor(Math.random() * pool.length)];

    cardCollection.push(card);

    localStorage.setItem("gems", gems);
    localStorage.setItem("cardCollection", JSON.stringify(cardCollection));

    updateDisplay();

    alert("You summoned: " + card.name + " (" + card.rarity + ")");
}

// ---------------------------
// SIMPLE BATTLE FOR GEMS
// ---------------------------
function battle() {
    if (cardCollection.length === 0) {
        alert("You need at least one card!");
        return;
    }

    let randomCard = cardCollection[Math.floor(Math.random() * cardCollection.length)];

    let enemyHP = 20 + Math.floor(Math.random() * 15);
    let playerAttack = randomCard.attack;

    if (playerAttack >= enemyHP) {
        let reward = 5 + Math.floor(Math.random() * 10);
        gems += reward;
        alert(`Your ${randomCard.name} defeated the enemy! You earned ${reward} gems!`);
    } else {
        alert(`Your ${randomCard.name} was too weakâ€¦ no gems earned.`);
    }

    localStorage.setItem("gems", gems);
    updateDisplay();
}


  
